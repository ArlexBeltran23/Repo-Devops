AWSTemplateFormatVersion: '2010-09-09'
Resources:
  MyEC2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      ImageId: 'ami-xxxxxxxxxxxxxxxx'  # Aquí debes reemplazar 'ami-xxxxxxxxxxxxxxxx' con el ID de la imagen de Amazon Linux 2
      InstanceType: 't2.micro'  # Tipo de instancia EC2
      SecurityGroups:
        - Ref: WebAccessSecurityGroup
        - Ref: SSHAccessSecurityGroup
      BlockDeviceMappings:
        - DeviceName: '/dev/sda1'
          Ebs:
            VolumeSize: 20
            VolumeType: 'gp3'  # Tipo de volumen EBS gp3

  WebAccessSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: 'Security group for web access'
      SecurityGroupIngress:
        - IpProtocol: 'tcp'
          FromPort: 80
          ToPort: 80
          CidrIp: '0.0.0.0/0'  # Acceso desde cualquier parte
        - IpProtocol: 'tcp'
          FromPort: 443
          ToPort: 443
          CidrIp: '0.0.0.0/0'  # Acceso desde cualquier parte

  SSHAccessSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: 'Security group for SSH access'
      SecurityGroupIngress:
        - IpProtocol: 'tcp'
          FromPort: 22
          ToPort: 22
          CidrIp: 'your_ip_address/32'  # Reemplaza 'your_ip_address' con tu dirección IP pública
